{% extends 'base/base.html' %}

{% block title %}{{ job.title }} at {{ job.company }} - Job Applier App{% endblock %}

{% block content %}
<div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6">
        <div class="flex justify-between items-start">
            <div>
                <h1 class="text-2xl font-bold text-gray-900">{{ job.title }}</h1>
                <p class="mt-1 max-w-2xl text-lg text-gray-500">{{ job.company }}</p>
            </div>
            {% if user.is_authenticated %}
                {% if user == job.posted_by %}
                    <div class="flex space-x-4">
                        <a href="{% url 'job_edit' job.slug %}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                            Edit Job
                        </a>
                        <a href="{% url 'job_delete' job.slug %}" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                            Delete Job
                        </a>
                    </div>
                {% else %}
                    <a href="{% url 'application_create' job.slug %}" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
                        Apply Now
                    </a>
                {% endif %}
            {% else %}
                <a href="{% url 'login' %}?next={{ request.path }}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                    Login to Apply
                </a>
            {% endif %}
        </div>
    </div>

    <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
        <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Location</dt>
                <dd class="mt-1 text-sm text-gray-900">{{ job.location }}</dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Job Type</dt>
                <dd class="mt-1 text-sm text-gray-900">{{ job.get_job_type_display }}</dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Experience Level</dt>
                <dd class="mt-1 text-sm text-gray-900">{{ job.get_experience_level_display }}</dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">Salary Range</dt>
                <dd class="mt-1 text-sm text-gray-900">{{ job.salary_range }}</dd>
            </div>
            {% if job.deadline %}
            <div class="sm:col-span-2">
                <dt class="text-sm font-medium text-gray-500">Application Deadline</dt>
                <dd class="mt-1 text-sm text-gray-900">{{ job.deadline|date:"F j, Y" }}</dd>
            </div>
            {% endif %}
            <div class="sm:col-span-2">
                <dt class="text-sm font-medium text-gray-500">Job Description</dt>
                <dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ job.description }}</dd>
            </div>
            <div class="sm:col-span-2">
                <dt class="text-sm font-medium text-gray-500">Requirements</dt>
                <dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ job.requirements }}</dd>
            </div>
        </dl>
    </div>

    <div class="bg-gray-50 px-4 py-4 sm:px-6">
        <div class="text-sm">
            <p class="text-gray-500">Posted {{ job.created_at|timesince }} ago by {{ job.posted_by.get_full_name|default:job.posted_by.username }}</p>
            {% if job.updated_at and job.updated_at != job.created_at %}
                <p class="text-gray-500">Last updated {{ job.updated_at|timesince }} ago</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %} 